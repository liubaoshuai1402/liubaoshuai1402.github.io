<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ç¨å¾®æ·±å…¥ä¸€äº›Pythonä¸­çš„ç±»ï¼ˆclassï¼‰ | BOGHTW</title>
    <link rel="icon" href= /images/favicon.png />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">ä¸»é¡µ</a></li>
      
      <li><a href="/series/">ä¸“æ </a></li>
      
      <li><a href="/categories/">åˆ†ç±»</a></li>
      
      <li><a href="/tags/">æ ‡ç­¾</a></li>
      
      <li><a href="/archives/">å½’æ¡£</a></li>
      
      <li><a href="/search/">æœç´¢</a></li>
      
      <li><a href="/about/">å…³äº</a></li>
      
    </ul>
    <hr/>
    </nav>


<div class="article-meta">
    <h1><span class="article-meta-title">ç¨å¾®æ·±å…¥ä¸€äº›Pythonä¸­çš„ç±»ï¼ˆclassï¼‰</span></h1>

    <div class="article-meta-info">
        

        
        

        
        
        
        

        
        
        
        
        
        
        
        
        

        
        
        
        
        
        
        
        
        

        
        

        ğŸ—“ï¸ 2025-05-13 ğŸ–ï¸ <a href="/series/python/">python</a> ğŸ—‚ï¸ <a href="/categories/%E4%BB%A3%E7%A0%81/">ä»£ç </a>
    </div>
</div>

<main>

    

<div class="toc-btn" id="tocBtn"><i class="fa-solid fa-bars-staggered"></i></div>
<div class="toc-panel" id="tocPanel"></div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('tocBtn');
    const panel = document.getElementById('tocPanel');
    let hoverTimeout;

    
    btn.addEventListener('mouseenter', () => {
      clearTimeout(hoverTimeout);
      generateToc();
      panel.classList.add('show');

      
      requestAnimationFrame(() => {
        const headers = Array.from(document.querySelectorAll('h2, h3, h4, h5, h6'));
        let activeHeader = null;
        let minDistance = Infinity;

        
        headers.forEach(header => {
          const rect = header.getBoundingClientRect();
          const distance = Math.abs(rect.top);
          if (distance < minDistance) {
            minDistance = distance;
            activeHeader = header;
          }
        });

        
        if (activeHeader) {
          const activeLink = panel.querySelector(`a[href="#${activeHeader.id}"]`);
          if (activeLink) {
            
            const panelHeight = panel.offsetHeight;
            const linkOffset = activeLink.offsetTop;
            const centerPosition = linkOffset - (panelHeight / 2) + (activeLink.offsetHeight / 2);
            
            panel.scrollTo({
              top: centerPosition,
              behavior: 'auto'
            });
          }
        }
      });
    });

    panel.addEventListener('mouseenter', () => clearTimeout(hoverTimeout));

    [btn, panel].forEach(el => {
      el.addEventListener('mouseleave', () => {
        hoverTimeout = setTimeout(() => {
          panel.classList.remove('show');
        }, 200);
      });
    });

    
    function generateToc() {
      if (panel.children.length > 0) return;

      const headers = Array.from(document.querySelectorAll('h2, h3, h4, h5, h6'));
      const counts = [0, 0, 0, 0, 0]; 

      headers.forEach(header => {
        const level = parseInt(header.tagName[1]) - 2;
        if (level < 0) return;

        counts[level]++;
        for (let i = level + 1; i < counts.length; i++) counts[i] = 0;
        const number = counts.slice(0, level + 1).join('.');

        
        const numberSpan = document.createElement('span');
        numberSpan.className = 'toc-number';
        numberSpan.textContent = number;

        
        const link = document.createElement('a');
        link.href = `#${header.id}`;
        link.style.paddingLeft = `${level * 12}px`;

        
        link.appendChild(numberSpan);
        link.appendChild(document.createTextNode(header.textContent));

        panel.appendChild(link);
      });
    }
  });
</script>

<style>
   
  .toc-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    cursor: pointer;
    padding: 6px 10px;
    background: #EFEFEF;
    border-radius: 8px;
    transition: background 0.3s;
    color: #999;
    opacity: 0.7;
  }

  .toc-btn:hover {
    background: #BEC2B3;
  }

   
  .toc-number {
    vertical-align: middle;
    margin-right: 8px;
    font-family: "LXGW WenKai";
    font-size: 0.8rem;
  }

   
  .toc-panel {
    border-radius: 8px;
    display: none;
    position: fixed;
    top: 66px;
    right: 20px;
    max-width: 360px;
    min-width: 200px;
    max-height: 80vh;
    overflow-y: auto;
    background: white;
    border: 1px solid #eee;
    padding: 10px 5px 10px 15px;
    z-index: 9998;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
     
    list-style: none;
  }

  .toc-panel a {
    display: block;
    padding: 4px 0;
    text-decoration: none;
    color: #333;
    white-space: nowrap;
     
     
     
  }

  .toc-panel a:hover {
    color: #007bff;
  }

   
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateX(10px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .toc-panel.show {
    display: block;
    animation: fadeIn 0.3s ease-out;
  }
</style>


    
    
    
        <h1 id="ç¨å¾®æ·±å…¥ä¸€äº›pythonä¸­çš„ç±»class">ç¨å¾®æ·±å…¥ä¸€äº›Pythonä¸­çš„ç±»ï¼ˆclassï¼‰</h1>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>**ç±»ï¼ˆclassï¼‰**åœ¨pythonä»£ç ä¸­å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œä½†åœ¨è¿‘æ—¥çš„å­¦ä¹ ä¸­å‘ç°ï¼Œæˆ‘å¯¹å®ƒçœŸæ˜¯äº†è§£ç”šå°‘ï¼Œç”šè‡³åŸºç¡€ç»“æ„éƒ½ä¸èƒ½ç†Ÿç¨”äºå¿ƒï¼Œæ•…å¼€æ­¤ç¬”è®°è®¤çœŸå­¦ä¹ ã€‚å’Œæˆ‘ä¸€èµ·é‡æ–°è®¤è¯†ä¸€ä¸‹å®ƒå§ã€‚</p>
<h2 id="ä¸€ä¸ªç®€å•çš„ç±»">ä¸€ä¸ªç®€å•çš„ç±»</h2>
<pre><code class="language-python">#code 1
class Dog:
    # ç±»å±æ€§
    species = &quot;Dog&quot;
    # åˆå§‹åŒ–æ–¹æ³•
    def __init__(self, name, age):
        self.name = name
        self.age = age
    # å®ä¾‹æ–¹æ³•
    def bark(self):
        return print(&quot;æ—ºæ—º&quot;)

print(mydog.species)
print(mydog.name,mydog.age)
mydog.bark()

#è¾“å‡ºä¸ºï¼š
#Dog
#doudou 2
#æ—ºæ—º
</code></pre>
<p><strong>ç±»</strong>æ˜¯ä¸€ç§å¯¹æ•°æ®è¿›è¡Œè®¡ç®—æ“ä½œçš„è“å›¾ï¼Œç¦»ä¸å¼€<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong>ã€‚</p>
<p>code 1ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Dog ç±»ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œäº†å®ä¾‹åŒ–ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>è¿™ä¸ªç±»çš„ç»“æ„ï¼Œå¾ˆç®€å•ã€‚</p>
<p>é¦–å…ˆæ˜¯æ”¾åœ¨ç¬¬ä¸€éƒ¨åˆ†çš„<strong>ç±»å±æ€§</strong>ã€‚<strong>ç±»å±æ€§</strong>æ˜¯<strong>ç›´æ¥åœ¨ç±»ä¸­å®šä¹‰å˜é‡</strong>ã€‚æ‰€æœ‰é€šè¿‡è¿™ä¸ªç±»ç”Ÿæˆçš„å¯¹è±¡éƒ½å…·æœ‰è¿™äº›å±æ€§ã€‚</p>
<p>ç„¶åæ˜¯æ”¾åœ¨ç¬¬äºŒéƒ¨åˆ†çš„è¯¸å¤šæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªçš„å‡½æ•°ã€‚</p>
<pre><code class="language-python">    def __init__(self, name, age):
        self.name = name
        self.age = age
</code></pre>
<ul>
<li>
<p><code>_init_</code>æ–¹æ³•å«<strong>åˆå§‹åŒ–æ–¹æ³•</strong>ï¼Œæ˜¯<strong>é­”æ³•æ–¹æ³•</strong>çš„ä¸€ç§ã€‚è®©å®ä¾‹åˆå§‹åŒ–æ—¶å°±å…·æœ‰<code>name</code>å’Œ<code>age</code>å±æ€§å’Œç›¸åº”çš„å€¼ã€‚å…·ä½“è¡¨ç°ä¸º<code>mydog = Dog(&quot;doudou&quot;,2)</code>ï¼Œè¿™ä¸ªç±»åœ¨åˆå§‹åŒ–æ—¶å°±<strong>éœ€è¦ä¸¤ä¸ªå‚æ•°</strong>æ‰èƒ½è½¬å˜ä¸ºå®ä¾‹ã€‚</p>
</li>
<li>
<p>pythonä¸­æ‰€æœ‰çš„å®ä¾‹æ–¹æ³•ï¼ŒåŒ…æ‹¬<code>__init__</code>æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°éƒ½å¿…é¡»æ˜¯<code>self</code>ï¼Œç”¨äºåŒºåˆ«<strong>æ™®é€šå‡½æ•°</strong>å’Œ<strong>æ–¹æ³•</strong>ã€‚</p>
</li>
<li>
<p><strong>é»˜è®¤å€¼</strong>ï¼Œåœ¨å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ å…¥é»˜è®¤å€¼ï¼Œè¿™å¯ä»¥ä¿è¯åœ¨ä¸ä¼ å…¥å‚æ•°æ—¶ï¼Œä¹Ÿèƒ½ç”Ÿæˆä¸€ä¸ªé»˜è®¤å®ä¾‹ã€‚</p>
<pre><code class="language-python">    def __init__(self, name=&quot;å°å¡æ‹‰ç±³&quot;, age=5):
        self.name = name
        self.age = age
</code></pre>
<p>è¿™æ ·çš„<code>__init__</code>æ–¹æ³•å°±ä¿è¯äº†ï¼Œå³ä½¿ç‹—ä¸»äººå¿˜è®°äº†å¡«å†™ä¿¡æ¯ï¼Œ<code>mydog = Dog()</code>ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œä½†é»˜è®¤çš„ç‹—ç‹—æ˜¯<strong>å°å¡æ‹‰ç±³</strong>ï¼Œè¿˜æ˜¯åº”è¯¥è®°å¾—ä¸ºè‡ªå·±çš„ç‹—ç‹—æ­£ç¡®å¡«å†™ä¿¡æ¯å‘¦ã€‚ï¼ˆå¯¹äºå…¶ä»–å®ä¾‹æ–¹æ³•ä¹Ÿé€‚ç”¨ï¼‰</p>
</li>
</ul>
<p>åœ¨ä¸€èˆ¬çš„å®ä¾‹æ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å‚æ•°ï¼Œå®šä¹‰å±æ€§ã€‚æˆ‘ä»¬çœ‹ä¸€æ®µæ–°çš„ä»£ç :</p>
<pre><code class="language-python">#code 2-1
class phone:
    owner = &quot;xiyangyang&quot;
    def __init__(self,type=&quot;huawei&quot;):
        self.type = type
    def call(self,number=10086):
        self.number = number
        print(&quot;the number is {}&quot;.format(self.number))
print(phone.owner)
myphone = phone(&quot;apple&quot;)
myphone.call(110)
print(&quot;what number is called? &quot;,myphone.number)
</code></pre>
<p>è¿™é‡Œåœ¨<code>phone</code>ç±»çš„<code>call</code>æ–¹æ³•ä¸‹ï¼Œå®šä¹‰äº†ä¸€ä¸ª<strong>å®ä¾‹å±æ€§</strong>ï¼Œå¹¶éœ€è¦ä¸€ä¸ªè¾“å…¥<code>number</code>æŒ‡å®šå€¼ã€‚</p>
<p>ä½†å®ä¾‹æ–¹æ³•çš„å‚æ•°ä¸ä¸€å®šéƒ½æ˜¯å®ä¾‹å±æ€§ï¼Œä¸”çœ‹ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-python">#code 2-2
class phone:
    def __init__(self,type=&quot;huawei&quot;):
        self.type = type
    def call(self,number=10086):
        print(&quot;the number is {}&quot;.format(number))
myphone = phone(&quot;apple&quot;)
myphone.call(110)
</code></pre>
<p>è¿™æ ·å®šä¹‰<code>call</code>æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿéœ€è¦ä¼ å…¥ä¸€ä¸ª<code>number</code>ï¼Œä½†æ˜¯è¿™ä¸ª<code>number</code>ä¸æ˜¯è¿™ä¸ªå®ä¾‹çš„å±æ€§ï¼Œæ— æ³•éšæ—¶æŸ¥çœ‹ã€‚</p>
<p>è¿™å°±æ˜¯è¯´ï¼Œå¯¹äºç±»ä¸­çš„æ–¹æ³•ï¼Œç›®å‰æ¶‰åŠçš„å‚æ•°æœ‰ä¸‰ç±»ï¼Œä¸€ä¸ªæ˜¯é»˜è®¤å‚æ•°<code>self</code>ï¼Œä¸€ä¸ªæ˜¯<strong>å®ä¾‹å±æ€§å‚æ•°</strong>ï¼Œä¸€ä¸ªæ˜¯<strong>æ™®é€šå‚æ•°</strong>ã€‚</p>
<ol>
<li>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†ä¸€ä¸ªç®€å•<strong>ç±»çš„ç»“æ„</strong>ã€‚å³ï¼šå£°æ˜ç±»å±æ€§ï¼Œå£°æ˜å®ä¾‹æ–¹æ³•ï¼ˆå…¶ä¸­æ¶‰åŠåˆ°æ·»åŠ å®ä¾‹å±æ€§ï¼‰ã€‚</li>
<li>ç”±ç±»ç”Ÿæˆå®ä¾‹æ—¶çš„å‚æ•°æ¥å£ï¼Œç”±é­”æ³•æ–¹æ³•<code>__init__</code>å®šä¹‰ï¼Œè€Œä¸€èˆ¬å®ä¾‹æ–¹æ³•çš„æ¥å£ï¼Œåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ‰ä¼šå‡ºç°ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ<code>__init__</code>æ–¹æ³•ä¸­å®šä¹‰çš„å®ä¾‹å±æ€§ï¼Œæ˜¯ä¼´ç”Ÿçš„ï¼Œåªè¦ç”Ÿæˆå®ä¾‹å°±å­˜åœ¨ã€‚è€Œéšä¸€èˆ¬å®ä¾‹æ–¹æ³•å®šä¹‰çš„å®ä¾‹å±æ€§ï¼Œåˆ™éœ€è¦é¦–æ¬¡è°ƒç”¨åæ‰å­˜åœ¨ã€‚</li>
</ol>
<h2 id="é­”æ³•æ–¹æ³•">é­”æ³•æ–¹æ³•</h2>
<p>åœ¨pythonä¸­ï¼Œæ‰€æœ‰è¢«åŒä¸‹åˆ’çº¿åŒ…å›´çš„æ–¹æ³•ï¼Œç»Ÿç§°ä¸ºé­”æ³•æ–¹æ³•ã€‚å¤ªå¤šäº†ï¼Œæˆ‘è¿™é‡Œåªè®°å½•æˆ‘é‡åˆ°çš„ï¼Œä¸å®šæ—¶æ›´æ–°ã€‚</p>
<h3 id="1__init__æ–¹æ³•">1.<code>__init__</code>æ–¹æ³•</h3>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•ç”¨äºç±»çš„åˆå§‹åŒ–ã€‚è§„å®šäº†å®ä¾‹åŒ–<strong>ç±»</strong>æ—¶æ¥å—çš„å‚æ•°ã€‚</p>
<h3 id="2__len__æ–¹æ³•">2.<code>__len__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-1
class menu:
    restaurant=&quot;hepingfandian&quot;
    def __init__(self,foods):
        self.foods = foods
    def __len__(self):
        count = 0
        for food in foods:
            count = count + 1
        return count
mymenu = menu([&quot;å®«ä¿é¸¡ä¸&quot;,&quot;é±¼é¦™è‚‰ä¸&quot;,&quot;ç±³é¥­&quot;])
print(len(mymenu))
#è¾“å‡ºï¼š3
</code></pre>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•è®©å®ä¾‹å¯ä»¥è¢«ç”¨<code>len()</code>å‡½æ•°ç»Ÿè®¡é•¿åº¦ï¼Œ<strong>æ ¸å¿ƒæ˜¯è¦è¿”å›ä¸€ä¸ªæ•´æ•°</strong>ï¼Œè‡³äºè¿™ä¸ªæ•´æ•°æ˜¯å¦‚ä½•è®¡ç®—å¾—åˆ°çš„ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°±ç”±è‡ªå·±å®šä¹‰äº†ã€‚</p>
<h3 id="3__getitem__æ–¹æ³•">3.<code>__getitem__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-2
class menu:
    restaurant=&quot;hepingfandian&quot;
    def __init__(self,foods):
        self.foods = foods
    def __getitem__(self,key):
        return 10
mymenu = menu([&quot;å®«ä¿é¸¡ä¸&quot;,&quot;é±¼é¦™è‚‰ä¸&quot;,&quot;ç±³é¥­&quot;])
print(mymenu[&quot;éœ¸ç‹é¤&quot;])
#è¾“å‡ºï¼š10
</code></pre>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•å¯ä»¥è®©å®ä¾‹åƒå­—å…¸æˆ–åˆ—è¡¨ä¸€æ ·ï¼Œå®ç°é”®å€¼å¯¹å’Œç´¢å¼•åˆ‡ç‰‡çš„åŠŸèƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯<strong>æ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼</strong>ã€‚ä¸ç„¶å°±åƒä¸Šè¿°ä»£ç ä¸€æ ·ï¼Œå®¢äººè¦åƒéœ¸ç‹é¤ï¼Œå¯¹åº”çš„å€¼å´æ˜¯10ã€‚</p>
<pre><code class="language-python">#code 3-3
class menu:
    restaurant=&quot;hepingfandian&quot;
    def __init__(self,foods):
        self.foods = foods
    def __getitem__(self,key):
        if not isinstance(key,str):
            raise TypeError(&quot;Attribute key must be a string&quot;)
        
        if key == &quot;éœ¸ç‹é¤&quot;:
            return &quot;ä½ åƒç‰›é­”&quot;

        for food in self.foods:
            if food == key:
                return self.foods[key]
        raise KeyError(f&quot;Food '{key}' does not exist in menu.&quot;)
        
mymenu = menu({&quot;å®«ä¿é¸¡ä¸&quot;:25,&quot;é±¼é¦™è‚‰ä¸&quot;:10,&quot;ç±³é¥­&quot;:2})
print(mymenu[&quot;éœ¸ç‹é¤&quot;])
print(mymenu[&quot;ç±³é¥­&quot;])
#è¾“å‡ºï¼šä½ åƒç‰›é­”
#è¾“å‡ºï¼š2
</code></pre>
<p><code>__getitem__</code>æ–¹æ³•å¯ä»¥ä¸ºå®ä¾‹æä¾›ç‹¬ç‰¹çš„æ¥å£ï¼Œå°±æ˜¯<code>[å‚æ•°]</code>ã€‚è¿™é‡Œçš„å‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—æˆ–è€…åˆ‡ç‰‡ï¼Œä½¿ç”¨èµ·æ¥åƒå­—å…¸æˆ–è€…åˆ—è¡¨ã€‚è€Œä¸€èˆ¬æ–¹æ³•çš„ä½¿ç”¨åˆ™è¦<code>.onemethod(å‚æ•°1ï¼Œå‚æ•°2ï¼Œ...)</code>ã€‚</p>
<pre><code class="language-python">#code 3-4
class top3:
    ip = &quot;harbin&quot;
    def __init__(self,school):
        self.school = school
    def __getitem__(self,index):
        if isinstance(index,int):
            return self.school[index]
        if isinstance(index,slice):
            return self.school[index]
Top3InMyheart = top3([&quot;qinghua&quot;,&quot;beida&quot;,&quot;hagongda&quot;])

print(&quot;who is top3?&quot;,Top3InMyheart[0:3])
print(Top3InMyheart.ip)
</code></pre>
<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåå«<code>top3</code>ç±»ï¼Œå®ç°äº†ç´¢å¼•å’Œåˆ‡ç‰‡åŠŸèƒ½ï¼ŒåŒæ—¶å¯ä»¥è¿™ä¸ªç±»çš„å®ä¾‹æ‹¥æœ‰åˆ—è¡¨ä¸åŒçš„åŠŸèƒ½ï¼Œå³è¿™ä¸ªç±»çš„å®ä¾‹æœ‰ä¸€ä¸ªç±»å±æ€§ï¼š<code>ip</code>ã€‚è®©æˆ‘ä»¬å¯ä»¥å¾—çŸ¥è¿™ä¸ªæ’åæ¥è‡ª<code>harbin</code>ã€‚</p>
<h3 id="4__setitem__æ–¹æ³•">4.<code>__setitem__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-5
class games:
    def __init__(self):
        self.games={}
    def __setitem__(self,key,value):
        self.games[key]=value
    def __getitem__(self,key):
        return self.games[key]

MyLoveGames = games()
MyLoveGames[1] = &quot;åŸç¥&quot;
print(MyLoveGames[1])
#è¾“å‡ºï¼šåŸç¥
</code></pre>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•è®©ç±»çš„å®ä¾‹å¯ä»¥åƒå­—å…¸æˆ–è€…åˆ—è¡¨ä¸€æ ·ï¼Œæ·»åŠ æ–°çš„é”®å€¼å¯¹æˆ–è€…æ·»åŠ æ–°çš„ç´¢å¼•å’Œå€¼ã€‚</p>
<h3 id="5__delitem__æ–¹æ³•">5.<code>__delitem__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-6
class games:
    def __init__(self):
        self.games={}
    def __setitem__(self,key,value):
        self.games[key]=value
    def __getitem__(self,key):
        return self.games[key]
    def __delitem__(self,key):
        del self.games[key]

MyLoveGames = games()
MyLoveGames[1] = &quot;åŸç¥&quot;
MyLoveGames[1] = &quot;DOTA2&quot;
print(MyLoveGames[1])
del MyLoveGames[1]
#è¾“å‡ºï¼šDOTA2
</code></pre>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•å¯ä»¥è®©ç±»çš„å®ä¾‹ä½¿ç”¨<code>del</code>å…³é”®å­—æ¥åˆ é™¤é”®æˆ–ç´¢å¼•ã€‚</p>
<h3 id="6__iter__æ–¹æ³•">6.<code>__iter__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-7
class games:
    def __init__(self):
        self.games={}
    def __setitem__(self,key,value):
        self.games[key]=value
    def __getitem__(self,key):
        return self.games[key]
    def __delitem__(self,key):
        del self.games[key]
    def __iter__(self):
        for game in self.games:
            yield game
            
            
MyLoveGame = games()
MyLoveGame[0] = &quot;åŸç¥&quot;
MyLoveGame[3] = &quot;DOTA2&quot;
MyLoveGame[2] = &quot;æ˜æ—¥æ–¹èˆŸ&quot;
del MyLoveGame[2]
for game in MyLoveGame:
    print(game)
#è¾“å‡ºï¼š0
#è¾“å‡ºï¼š3
</code></pre>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•è®©å®ä¾‹å˜ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œ<code>for</code>å¾ªç¯ã€‚ä¹Ÿå¯ä»¥ç”¨<code>iter()</code>å‡½æ•°ç”Ÿæˆè¿­ä»£å™¨ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªå¤´ç–¼çš„<code>yield</code>å…³é”®å­—ï¼Œåˆæ¶‰åŠåˆ°<strong>ç”Ÿæˆå™¨</strong>å’Œ<strong>è¿­ä»£å™¨</strong>ã€‚è¿˜æ˜¯å¦å¼€ä¸€æ–‡æ¥è®°å½•å§ã€‚</p>
<p>ç®€å•æ¥è®²ï¼Œå½“ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡é‡åˆ°<code>for</code>å¾ªç¯äº‹ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬åˆ°å®ƒçš„<code>__iter__</code>æ–¹æ³•ï¼Œåˆå› ä¸ºè¿™é‡Œçš„<code>__iter__</code>æ–¹æ³•å«æœ‰<code>yield</code>å…³é”®å­—ï¼Œæ‰€ä»¥ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯å¾—åˆ°äº†ä¸€ä¸ª<strong>ç”Ÿæˆå™¨</strong>å¯¹è±¡ã€‚</p>
<p>ç´§æ¥ç€ï¼Œ<code>for</code>å¾ªç¯åˆæ ¹æ®è¿™ä¸ªç”Ÿæˆå™¨å¯¹è±¡çš„<code>__next__</code>æ–¹æ³•ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œæ˜¯<strong>ç”Ÿæˆå™¨å¯¹è±¡çš„</strong><code>__next__</code>æ–¹æ³•ï¼Œè€Œéæ˜¯ï¼Œæˆ‘ä»¬è¿™ä¸ªè‡ªå®šä¹‰ç±»çš„<code>__next__</code>æ–¹æ³•ï¼Œå…¶å®ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿæ²¡æœ‰å†™<code>__next__</code>æ–¹æ³•ï¼‰æŠŠå¾—åˆ°çš„å€¼èµ‹å€¼ç»™<code>for game in MyLoveGame:</code>ä¸­çš„<code>game</code>ï¼Œç„¶åæ‰“å°ã€‚</p>
<p>åœ¨è¿›è¡Œç¬¬äºŒæ¬¡å¾ªç¯çš„æ—¶å€™ï¼ŒåŒæ ·åœ°ï¼Œå†æ¬¡è¿›å…¥å®ä¾‹çš„<code>__iter__</code>æ–¹æ³•ï¼Œå¾—åˆ°åŒä¸€ä¸ª<strong>ç”Ÿæˆå™¨</strong>å¯¹è±¡ã€‚å¹¶å¯¹è¿™ä¸ªç”Ÿæˆå™¨å¯¹è±¡å†æ­¤æ–½åŠ <code>__next__</code>æ–¹æ³•ï¼Œå¹¶æŠŠå¾—åˆ°çš„å€¼èµ‹å€¼ç»™<code>for game in MyLoveGame:</code>ä¸­çš„<code>game</code>ï¼Œç„¶åæ‰“å°ã€‚</p>
<ul>
<li>è°æ˜¯<code>for game in MyLoveGame:</code>ä¸­çš„<code>game</code>å€¼ï¼Ÿ</li>
</ul>
<p><code>__iter__</code>æ–¹æ³•æœ¬è´¨ä¸Šå®šä¹‰äº†ä¸€ä¸ª<strong>ç”Ÿæˆå™¨</strong>å¯¹è±¡ï¼Œè€Œéå‡½æ•°ã€‚<code>for</code>å¾ªç¯ä¼šä¸æ–­è°ƒç”¨è¿™ä¸ªç”Ÿæˆå™¨å¯¹è±¡<code>__next__</code>æ–¹æ³•å¹¶æŠŠå¾—åˆ°çš„å€¼ä¼ é€’ç»™<code>game</code>ã€‚</p>
<h3 id="7__repr__æ–¹æ³•">7.<code>__repr__</code>æ–¹æ³•</h3>
<pre><code class="language-python">#code 3-8
import collections.abc
class games(collections.abc.MutableMapping):
    def __init__(self):
        self.games={}
    def __len__(self):
        return 0
    def __setitem__(self,key,value):
        self.games[key]=value
    def __getitem__(self,key):
        return self.games[key]
    def __delitem__(self,key):
        del self.games[key]
    def __iter__(self):
        for game in self.games:
            yield game
    def __repr__(self):
        return repr(dict(self))
            
MyLoveGame = games()
MyLoveGame[0] = &quot;åŸç¥&quot;
MyLoveGame[1] = &quot;DOTA2&quot;
MyLoveGame[2] = &quot;æ˜æ—¥æ–¹èˆŸ&quot;

print(MyLoveGame)
#è¾“å‡ºï¼š{0: 'åŸç¥', 1: 'DOTA2', 2: 'æ˜æ—¥æ–¹èˆŸ'}
</code></pre>
<p>è¿™é‡Œè®©è‡ªå®šä¹‰çš„gamesç»§æ‰¿äº†ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œè¿™æ ·<code>return repr(dict(self))</code>æ‰ä¸æŠ¥é”™ã€‚</p>
<p>è¿™ä¸ªé­”æ³•æ–¹æ³•è®©å®ä¾‹å¯ä»¥ç›´æ¥ä½¿ç”¨å®ä¾‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªå®˜æ–¹å­—ç¬¦ä¸²ã€‚</p>
<h2 id="ç»§æ‰¿ä¸æŠ½è±¡åŸºç±»">ç»§æ‰¿ä¸æŠ½è±¡åŸºç±»</h2>
<ul>
<li>
<h3 id="å¦‚ä½•ç»§æ‰¿çˆ¶ç±»">å¦‚ä½•ç»§æ‰¿çˆ¶ç±»</h3>
<pre><code class="language-python">#code 4-1
class student:
    def __init__(self,gender=1,age=18):
        self.gender = gender
        self.age = age

class xiaoxiaobuaigugujiao(student):
    def interests(self,data):
        self.interests = data
        print(self.interests)
me = xiaoxiaobuaigugujiao()
print(me.gender)
print(me.age)
me.interests(&quot;games&quot;)


</code></pre>
<p>åœ¨å®šä¹‰å­ç±»çš„æ—¶å€™ï¼Œåœ¨å­ç±»çš„åå­—ååŠ ä¸Š<code>(çˆ¶ç±»å)</code>å³å¯ã€‚</p>
</li>
<li>
<h3 id="superå‡½æ•°">super()å‡½æ•°</h3>
<pre><code class="language-python">#code 4-2
class student:
    def __init__(self,gender=1,age=18):
        self.gender = gender
        self.age = age

class xiaoxiaobuaigugujiao(student):
    #å­ç±»ä¸­ï¼Œå½“è¦†ç›–çˆ¶ç±»ä¸­çš„åŒåæ–¹æ³•åï¼Œä¸çˆ¶ç±»åŒåæ–¹æ³•çš„é»˜è®¤å‚æ•°ä¹Ÿè¦é‡æ–°å†™ä¸€ç¯‡ï¼Œä¸ä¼šç»§æ‰¿
    def __init__(self,gender=1,age=18,height=170):
        #è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•
        super().__init__(gender,age)
        #é¢å¤–è¡¥å……
        self.height = height
    def interests(self,data):
        self.interests = data
        print(self.interests)
me = xiaoxiaobuaigugujiao()
print(me.gender)
print(me.age)
print(me.height)
me.interests(&quot;games&quot;)
</code></pre>
<p><code>super()</code>å‡½æ•°é€šå¸¸å‡ºç°åœ¨å­ç±»å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå¹¶å¯ä»¥åŠ ä»¥è¡¥å……ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨å­ç±»åˆå§‹åŒ–æ—¶ï¼Œå°±è°ƒç”¨äº†çˆ¶ç±»<code>student</code>çš„æ„é€ æ–¹æ³•ï¼Œå¹¶é¢å¤–è¡¥å……äº†<code>height</code>ã€‚</p>
</li>
<li>
<h3 id="æŠ½è±¡åŸºç±»">æŠ½è±¡åŸºç±»</h3>
</li>
</ul>
<p>æŠ½è±¡åŸºç±»åªèƒ½è¢«ç»§æ‰¿ã€‚å®ƒè¦æ±‚å­ç±»å¿…é¡»å®ç°æŸäº›<strong>æŠ½è±¡æ–¹æ³•</strong>ã€‚</p>

</main>

<style>
 
.article-meta {
    text-align: center;
    text-decoration: none;
    background: #efefef;
    padding: 1px;
    border-radius: 5px;
}

.article-meta-title {
    font-size: 1em;
}

.article-meta-info {
    color: #666;
    font-size: 0.9rem;
    margin: -0.6rem 0 0.2rem 10px;
    text-align: left;
}

.article-meta-info a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
}
</style>



<h1 style="font-size: 1.2rem; margin: 2.5rem 0 0.1rem 0;">Comment</h1>
<div class="cusdis-comments">
  <div id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id="0eeb9b3b-40ad-41b5-94e8-13a830e599d7"
    data-page-id="02f4b0fc777bad91d53c13e190935dc0"
    data-page-url="http://localhost:1313/%E4%BB%A3%E7%A0%81/class_in_python/"
    data-page-title="ç¨å¾®æ·±å…¥ä¸€äº›Pythonä¸­çš„ç±»ï¼ˆclassï¼‰"
  ></div>
  <script async defer src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/cusdis/cusdis.es.min.js"></script>
</div>

<style>
.cusdis-comments {
  border-top: 2px dashed #cfcfcf;
  padding-top: 1.3rem;
}

#cusdis_thread iframe {
  min-height: 500px !important;
  overflow: visible !important;
}
</style>


<footer>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/auto-render.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/math-code.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/render-katex.min.js"></script>

  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/center-img.min.js"></script>
  
  

<div id="menuBtnContainer">
    
    <button id="menuBtn"><i class="fa-solid fa-screwdriver-wrench"></i></button>

    
    <button id="backToBottomBtn" class="menu-popup-btn top-btn"><i class="fa-solid fa-square-caret-down"></i></button>
    <button id="backToTopBtn" class="menu-popup-btn top-btn"><i class="fa-solid fa-square-caret-up"></i></button>

    
    <div class="menu-popup-btn edit-btn">
        <a href='https://github.com/liubaoshuai1402/liubaoshuai1402.github.io/edit/main/content/%e4%bb%a3%e7%a0%81/class_in_Python.md'
            target="_blank" rel="noopener">
            <i class="fa-solid fa-square-pen"></i>
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var menuBtn = document.getElementById('menuBtn');
        var menuBtnContainer = document.getElementById('menuBtnContainer');
        var backToTopBtn = document.getElementById('backToTopBtn');
        var backToBottomBtn = document.getElementById('backToBottomBtn');
        var popupBtns = document.querySelectorAll('.menu-popup-btn');
        var hoverTimeout;

        
        menuBtnContainer.classList.add('visible');

        
        function showPopupBtns() {
            clearTimeout(hoverTimeout);
            menuBtnContainer.classList.add('active');
        }

        
        function hidePopupBtns() {
            hoverTimeout = setTimeout(function() {
                menuBtnContainer.classList.remove('active');
            }, 300);
        }

        
        menuBtnContainer.addEventListener('mouseenter', showPopupBtns);
        menuBtnContainer.addEventListener('mouseleave', hidePopupBtns);

        
        menuBtn.addEventListener('click', function() {
            if (menuBtnContainer.classList.contains('active')) {
                menuBtnContainer.classList.remove('active');
            } else {
                showPopupBtns();
            }
        });

        
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        
        backToBottomBtn.addEventListener('click', function() {
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth'
            });
        });
    });
</script>

<style>
     
    #menuBtnContainer {
        position: fixed;
        right: 20px;
        bottom: 20px;
        z-index: 999;
        opacity: 0.6;
        visibility: visible;
        transition: opacity 0.3s;
    }

    #menuBtnContainer:hover {
        opacity: 1;
    }

     
    #menuBtn {
        border-radius: 8px;
        border: none;
        color: #aaa;
        font-family: "Maple Mono NF CN";
        font-size: 1.2rem;
        transition: background 0.3s;
        cursor: pointer;
        background: #EFEFEF;
        z-index: 1000;
        position: relative;
    }

    #menuBtn:hover {
        background: #BEC2B3;
        color: #666;
    }

     
    .menu-popup-btn {
        position: absolute;
        opacity: 0;
        visibility: hidden;
        border-radius: 8px;
        border: none;
        color: #aaa;
        font-family: "Maple Mono NF CN";
        font-size: 1.3rem;
        transition: all 0.3s ease;
        background: #EFEFEF;
        cursor: pointer;
        z-index: 999;
    }

     
    .menu-popup-btn.top-btn {
        right: 0;
        transform: translateY(0) scale(0.8);
    }

     
    .menu-popup-btn.edit-btn {
        bottom: 0;
        transform: translateX(0) scale(0.8);
        padding: 1px 6.6px 0px 6.6px;
    }

    .menu-popup-btn.edit-btn a {
        color: #ccc;
        text-decoration: none;
        background: none !important;
        transition: opacity 0.2s;
        padding: 0;
        margin: 0;
    }

     
    #menuBtnContainer.active .menu-popup-btn {
        opacity: 1;
        visibility: visible;
    }

     
    #menuBtnContainer.active #backToBottomBtn {
        transform: translateY(-60px) scale(1);
    }

     
    #menuBtnContainer.active #backToTopBtn {
        transform: translateY(-110px) scale(1);
    }

     
    #menuBtnContainer.active .edit-btn {
        transform: translateX(-60px) scale(1);
    }

     
    .menu-popup-btn:hover,
    .menu-popup-btn.edit-btn:hover {
        background: #BEC2B3;
        color: #666;
    }

    .menu-popup-btn.edit-btn:hover a {
        color: #666;
    }

     
    @media (max-width: 768px) {
        #menuBtnContainer {
            right: 15px;
            bottom: 15px;
        }

        #menuBtnContainer.active #backToBottomBtn {
            transform: translateY(-50px) scale(1);
        }

        #menuBtnContainer.active #backToTopBtn {
            transform: translateY(-90px) scale(1);
        }

        #menuBtnContainer.active .edit-btn {
            transform: translateX(-50px) scale(1);
        }
    }
</style>



  <script>
  document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('ul').forEach(ul => {
      
      const isTodoList = Array.from(ul.children).some(li => {
        return li.innerHTML.includes('type="checkbox"')
      });

      if (isTodoList) {
        
        const todolistContainer = document.createElement('div');
        todolistContainer.className = 'todolist';

        
        addTaskProgressBar(ul, todolistContainer);

        
        ul.querySelectorAll('li').forEach(li => {
          const todoItemDiv = document.createElement('div');
          todoItemDiv.className = 'todo-item';

          
          const isChecked = li.innerHTML.includes('checked');
          const content = li.innerHTML
            .replace(/<input[^>]+>/g, '') 
            .trim();

          
          const checkedIcon = `<svg t="1742522457277" class="todo-item-checked-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12342"><path d="M512 938.688A426.624 426.624 0 1 1 512 85.376a426.624 426.624 0 0 1 0 853.312z m0-85.312A341.312 341.312 0 1 0 512 170.688a341.312 341.312 0 0 0 0 682.688z m-42.56-170.688L288.448 501.632l60.288-60.288L469.44 561.92l241.28-241.28 60.416 60.288-301.696 301.696z" p-id="12343"></path></svg>`;
          const uncheckedIcon = `<svg t="1742522354856" class="todo-item-unchecked-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11882"><path d="M512 938.666667C276.352 938.666667 85.333333 747.648 85.333333 512S276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667-191.018667 426.666667-426.666667 426.666667z m0-85.333334a341.333333 341.333333 0 1 0 0-682.709333A341.333333 341.333333 0 0 0 512 853.333333z" p-id="11883"></path></svg>`;

          
          todoItemDiv.innerHTML = `
            <span class="todo-item-checkbox">
              ${isChecked ? checkedIcon : uncheckedIcon}
            </span>
            <span class="todo-item-content">
              ${isChecked ? `<del>${content}</del>` : content}
            </span>
          `;

          
          todolistContainer.appendChild(todoItemDiv);
        });

        
        ul.parentNode.replaceChild(todolistContainer, ul);
      }
    });

    function addTaskProgressBar(ul, todolistContainer) {
      
      const totalTasks = ul.children.length;
      const finishedTasks = Array.from(ul.children).filter(li => li.innerHTML.includes('checked')).length;

      
      const progressContainer = document.createElement('div');
      progressContainer.className = 'todo-progress';

      
      const counterSpan = document.createElement('span');
      counterSpan.className = 'todo-progress-counter';
      counterSpan.textContent = `${finishedTasks}/${totalTasks}`;

      
      const progressTrack = document.createElement('div');
      progressTrack.className = 'todo-progress-bar';

      
      const progressFill = document.createElement('div');
      progressFill.className = 'todo-progress-bar-fill';
      progressFill.style.width = `${(finishedTasks / totalTasks) * 100}%`;

      
      const flagSpan = document.createElement('span');
      flagSpan.className = 'todo-progress-flag';
      flagSpan.innerHTML = `${finishedTasks === totalTasks ? 'ğŸŒŸ' : 'ğŸš§'}`;

      
      progressTrack.appendChild(progressFill);
      progressContainer.append(flagSpan, progressTrack, counterSpan);
      todolistContainer.appendChild(progressContainer);
    }
  });
</script>

<style>
   
  .todolist {
    padding-left: 0.6rem;
  }

  .todo-item {
    padding: 0.2rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
    margin: -0.5rem 0 -0.5rem -0.7rem;
    line-height: 1.3;
  }

  .todo-item-checkbox {
    flex-shrink: 0;
    font-size: 1.2em;

    svg {
      margin-top: 0.46rem;
      width: 16px !important;
      height: 16px !important;
    }
  }

  .todo-item-checked-icon {
    fill: #707070;
  }

  .todo-item-unchecked-icon {
    fill: #1A61CC;
  }

  .todo-item-unchecked-icon:hover {
    fill: red;
    width: 20px !important;
    height: 20px !important;
  }

  .todo-item-content {
    flex: 1;
    word-break: break-all;

    p {
      margin: 0;
      padding: 0;
    }
  }

   
  .todo-progress {
    display: flex;
     
    align-items: center;
    gap: 0.3rem;
     
    margin: 0.1rem 0 0 0.7rem;
  }

  .todo-progress-counter {
     
    font-family: "LXGW WenKai";
    font-size: 0.8rem;
    color: #707070;
  }

  .todo-progress-bar {
    flex: 1;
    height: 2px;
    background: #a64036;
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    max-width: 20%;
  }

  .todo-progress-bar-fill {
    height: 100%;
    background: #84a729;
    transition: width 0.3s ease;
  }

  .todo-progress-flag {
    display: none;
    position: relative;
    font-size: 0.9rem;
  }
</style>

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/github.min.css">

<script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/highlight/highlight.min.js"></script>

<script>document.addEventListener('DOMContentLoaded', () => hljs.highlightAll())</script>

  
  <script>
    const langToNerdFontMap = {
        asm: '\ue6ab',
        bash: '\ue760',
        bazel: '\ue63a',
        c: '\ue61e',
        cmake: '\ue794',
        cmd: '\uebc4',
        cpp: '\ue61d',
        'c++': '\ue61d',
        csharp: '\ue7b2',
        css: '\ue749',
        diff: '\ueae1',
        dockerfile: '\uf21f',
        go: '\udb81\udfd3',
        gradle: '\ue7f2',
        html: '\ue736',
        java: '\uedaf',
        javascript: '\ue781',
        json: '\ueb0f',
        latex: '\ue81f',
        llvm: '\ue823',
        lua: '\ue826',
        makefile: '\ue673',
        markdown: '\uf48a',
        maven: '\ue82c',
        plaintext: '\udb80\udd4d',
        plantuml: '\ue8cb',
        powershell: '\ue86c',
        python: '\ued1b',
        rust: '\udb85\ude17',
        shell: '\ue760',
        sql: '\udb82\udc66',
        text: '\udb80\udd4d',
        toml: '\ue6b2',
        txt: '\udb80\udd4d',
        typescript: '\ue8ca',
        uml: '\ue8cb',
        vim: '\ue7c5',
        wasm: '\ue8e0',
        xml: '\ue8ea',
        yaml: '\ue8eb',
    };

    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('pre > code').forEach(codeBlock => {
            const parentElement = codeBlock.parentElement;

            
            const tools = document.createElement('div');
            tools.className = 'code-tools';

            
            const foldBtn = document.createElement('button');
            foldBtn.className = 'fold-btn';
            foldBtn.innerHTML = '\uf48c';
            foldBtn.style.display = 'none';

            
            const langLabel = document.createElement('div');
            langLabel.className = 'lang-label';
            const lang = [...codeBlock.classList].find(c => c.startsWith('language-'))?.split('-')[1] || 'text';
            const icon = langToNerdFontMap[lang.toLowerCase()];
            langLabel.textContent = icon || lang.toUpperCase();
            if (!icon) langLabel.style.fontSize = '0.8rem';

            
            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.textContent = '\uf4bb COPY';

            
            const scale_height = 500;       
            const collapsed_height = 300;   
            const checkHeight = () => {
                const originalDisplay = parentElement.style.display;
                parentElement.style.display = 'block';
                const fullHeight = parentElement.scrollHeight;
                parentElement.style.display = originalDisplay;
                return fullHeight > scale_height;
            };

            
            if (checkHeight()) {
                foldBtn.style.display = 'flex';
                parentElement.dataset.fullHeight = `${parentElement.scrollHeight}px`;

                
                parentElement.classList.add('collapsed');
                parentElement.style.maxHeight = `${collapsed_height}px`;
                foldBtn.innerHTML = '\uf4d9';

                parentElement.style.overflowY = 'auto'; 

                foldBtn.addEventListener('click', () => {
                    const isCollapsed = parentElement.classList.toggle('collapsed');
                    foldBtn.innerHTML = isCollapsed ? '\uf4d9' : '\uf48c';

                    if (isCollapsed) {
                        parentElement.style.maxHeight = `${collapsed_height}px`;
                        parentElement.style.overflowX = 'auto';
                    } else {
                        parentElement.style.maxHeight = 'none';
                        void parentElement.offsetHeight;
                        parentElement.dataset.fullHeight = `${parentElement.scrollHeight}px`;
                    }
                });
            }

            
            copyBtn.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(codeBlock.textContent);
                    copyBtn.textContent = '\uf00c COPIED!';
                    setTimeout(() => copyBtn.textContent = '\uf4bb COPY', 2000);
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            });

            
            tools.append(langLabel, foldBtn, copyBtn);
            parentElement.prepend(tools);
        });
    });
</script>

<style>
 
.code-tools {
    position: absolute;
    right: 10px;
    top: 20px;
    display: flex;
    align-items: center;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    pointer-events: none;
    font-family: "Maple Mono NF CN";
}

.fold-btn {
    cursor: pointer;
    border: none;
    color: #666;
    background: none;
    font-family: "Maple Mono NF CN";
    font-size: 0.9rem;
    line-height: 1.2;
    margin: 0 0 0 0.45rem;
    transition: all 0.2s ease;
}

 
.lang-label {
     
    color: #666;
    font-size: 1.2rem;
    line-height: 1.2;
}

 
.copy-btn {
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 0 0.3rem;
    margin: 0 0 0 0.6rem;
    color: #333;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    font-size: 0.6rem;
    line-height: 1.8;
    cursor: pointer;
    font-family: "Maple Mono NF CN";
}

 
pre:hover .code-tools {
    opacity: 1;
    pointer-events: auto;
}
</style>


  
<script>
    
    window.diagramRenderUtils = {
        
        getOrCreateFullscreenOverlay: function() {
            let overlay = document.querySelector('.fullscreen-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'fullscreen-overlay';
                document.body.appendChild(overlay);

                
                overlay.addEventListener('dblclick', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });

                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && overlay.classList.contains('active')) {
                        overlay.classList.remove('active');
                    }
                });
            }
            return overlay;
        },

        
        createDiagramContainer: function() {
            const container = document.createElement('div');
            container.className = 'code-rendered-diagram';
            return container;
        },

        
        createCopyButton: function() {
            const copyButton = document.createElement('button');
            copyButton.className = 'code-rendered-diagram-copy-button';
            copyButton.innerHTML = '&#xf4bb; COPY-SRC';
            return copyButton;
        },

        
        createFullscreenButton: function() {
            const fullscreenButton = document.createElement('button');
            fullscreenButton.className = 'code-rendered-diagram-fullscreen-button';
            fullscreenButton.innerHTML = '&#xf065; FULL';
            return fullscreenButton;
        },

        
        makeSVGTransparent: function(svgText) {
            const doc = new DOMParser().parseFromString(svgText, 'image/svg+xml');
            doc.querySelectorAll('[fill="#ffffff"],[fill="white"],[style*="fill: white"]')
                .forEach(el => {
                    if (el.tagName !== 'svg') {
                        el.setAttribute('fill', 'transparent');
                    }
                });
            doc.documentElement.style.backgroundColor = 'transparent';
            return new XMLSerializer().serializeToString(doc);
        },

        
        setupCopyButton: function(copyButton, codeContent) {
            copyButton.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(codeContent);
                    copyButton.textContent = '\uf00c COPIED!';
                    setTimeout(() => copyButton.innerHTML = '&#xf4bb; COPY-SRC', 2000);
                } catch (err) {
                    copyButton.textContent = 'FAILED';
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            });
        },

        
        setupShowSourceCode: function(imageElem, sourceCode) {
            
            imageElem.addEventListener('contextmenu', function(e) {
                e.preventDefault();

                
                const pre = document.createElement('pre');
                const codeElem = document.createElement('code');
                codeElem.textContent = sourceCode;
                pre.appendChild(codeElem);

                
                window.diagramRenderUtils.popupWindowUtils.create({
                    title: 'Source Code',
                    content: pre,
                    x: e.clientX,
                    y: e.clientY,
                    minWidth: 300,
                    maxWidth: '60%',
                    maxHeight: '60%',
                    closeOnClickOutside: true,
                    closeOnEsc: true,
                    className: 'source-code-viewer'
                });
            });
        },

        
        setupFullscreenButton: function(fullscreenButton, contentElement, isImage = false) {
            fullscreenButton.addEventListener('click', () => {
                const overlay = this.getOrCreateFullscreenOverlay();
                let clonedContent;

                if (isImage) {
                    
                    clonedContent = contentElement.cloneNode(true);
                } else {
                    
                    const svgElement = contentElement.querySelector('svg');
                    if (!svgElement) return;
                    clonedContent = svgElement.cloneNode(true);
                }

                overlay.innerHTML = '';

                
                const exitButton = document.createElement('button');
                exitButton.className = 'fullscreen-exit-button';
                exitButton.innerHTML = 'ESC';
                exitButton.onclick = () => overlay.classList.remove('active');

                overlay.appendChild(exitButton);
                overlay.appendChild(clonedContent);
                overlay.classList.add('active');

                
                this.setupZoomAndDrag(overlay, isImage ? 'img' : 'svg');
            });
        },

        
        setupZoomAndDrag: function(overlay, selector) {
            let scale = 1;
            let posX = 0;
            let posY = 0;
            let isDragging = false;
            let startX = 0;
            let startY = 0;

            const element = overlay.querySelector(selector);

            
            overlay.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = e.deltaY * -0.002;
                const newScale = Math.min(Math.max(scale + delta, 0.1), 10);

                
                const rect = element.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                
                posX += mouseX * (1 - newScale / scale);
                posY += mouseY * (1 - newScale / scale);

                scale = newScale;
                updateTransform();
            });

            
            overlay.addEventListener('mousedown', (e) => {
                if (e.target === overlay) return;
                isDragging = true;
                startX = e.clientX - posX;
                startY = e.clientY - posY;
                overlay.classList.add('dragging');
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                posX = e.clientX - startX;
                posY = e.clientY - startY;
                updateTransform();
            });

            window.addEventListener('mouseup', () => {
                isDragging = false;
                overlay.classList.remove('dragging');
            });

            function updateTransform() {
                element.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
            }
        },

        
        popupWindowUtils: {
            
            create: function(options) {
                
                const config = {
                    title: 'Popup Window',
                    content: '',         
                    x: 100,              
                    y: 100,              
                    minWidth: 300,       
                    maxWidth: '80%',     
                    maxHeight: '80%',    
                    closeOnClickOutside: true,
                    closeOnEsc: true,
                    onClose: null,       
                    className: ''        
                };

                
                Object.assign(config, options);

                
                if (config.className) {
                    const existingPopup = document.querySelector(`.popup-window.${config.className}`);
                    if (existingPopup) {
                        document.body.removeChild(existingPopup);
                    }
                }

                
                const popup = document.createElement('div');
                popup.className = `popup-window ${config.className}`.trim();

                
                const titleBar = document.createElement('div');
                titleBar.className = 'popup-window-title';
                titleBar.textContent = config.title;

                
                const closeButton = document.createElement('button');
                closeButton.className = 'popup-window-close';
                closeButton.innerHTML = '&times;';

                
                titleBar.appendChild(closeButton);

                
                const contentContainer = document.createElement('div');
                contentContainer.className = 'popup-window-content';

                
                if (typeof config.content === 'string') {
                    contentContainer.innerHTML = config.content;
                } else if (config.content instanceof Element) {
                    contentContainer.appendChild(config.content);
                }

                
                popup.appendChild(titleBar);
                popup.appendChild(contentContainer);

                
                popup.style.minWidth = typeof config.minWidth === 'number' ? `${config.minWidth}px` : config.minWidth;
                popup.style.maxWidth = typeof config.maxWidth === 'number' ? `${config.maxWidth}px` : config.maxWidth;
                popup.style.maxHeight = typeof config.maxHeight === 'number' ? `${config.maxHeight}px` : config.maxHeight;

                
                document.body.appendChild(popup);

                
                const popupRect = popup.getBoundingClientRect();
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;

                
                let left = Math.min(Math.max(config.x, 20), windowWidth - popupRect.width - 20);
                let top = Math.min(Math.max(config.y, 20), windowHeight - popupRect.height - 20);

                popup.style.left = `${left}px`;
                popup.style.top = `${top}px`;

                
                const closePopup = () => {
                    if (document.body.contains(popup)) {
                        document.body.removeChild(popup);
                        if (typeof config.onClose === 'function') {
                            config.onClose();
                        }
                    }
                };

                closeButton.addEventListener('click', closePopup);

                
                if (config.closeOnEsc) {
                    const escHandler = (e) => {
                        if (e.key === 'Escape' && document.body.contains(popup)) {
                            closePopup();
                            document.removeEventListener('keydown', escHandler);
                        }
                    };
                    document.addEventListener('keydown', escHandler);
                }

                
                if (config.closeOnClickOutside) {
                    const outsideClickHandler = (e) => {
                        if (popup && !popup.contains(e.target) && document.body.contains(popup)) {
                            closePopup();
                            document.removeEventListener('mousedown', outsideClickHandler);
                        }
                    };

                    
                    setTimeout(() => {
                        document.addEventListener('mousedown', outsideClickHandler);
                    }, 100);
                }

                
                let isDragging = false;
                let offsetX = 0;
                let offsetY = 0;

                titleBar.addEventListener('mousedown', (e) => {
                    
                    if (e.target !== closeButton) {
                        isDragging = true;
                        offsetX = e.clientX - popup.getBoundingClientRect().left;
                        offsetY = e.clientY - popup.getBoundingClientRect().top;
                        popup.classList.add('dragging');
                    }
                });

                const mouseMoveHandler = (e) => {
                    if (isDragging) {
                        let newLeft = e.clientX - offsetX;
                        let newTop = e.clientY - offsetY;

                        
                        newLeft = Math.max(0, Math.min(windowWidth - popupRect.width, newLeft));
                        newTop = Math.max(0, Math.min(windowHeight - popupRect.height, newTop));

                        popup.style.left = `${newLeft}px`;
                        popup.style.top = `${newTop}px`;
                    }
                };

                const mouseUpHandler = () => {
                    if (isDragging) {
                        isDragging = false;
                        popup.classList.remove('dragging');
                    }
                };

                document.addEventListener('mousemove', mouseMoveHandler);
                document.addEventListener('mouseup', mouseUpHandler);

                
                return {
                    element: popup,
                    contentElement: contentContainer,
                    close: closePopup,
                    setTitle: (title) => {
                        titleBar.textContent = title;
                        titleBar.appendChild(closeButton); 
                    },
                    setContent: (content) => {
                        contentContainer.innerHTML = '';
                        if (typeof content === 'string') {
                            contentContainer.innerHTML = content;
                        } else if (content instanceof Element) {
                            contentContainer.appendChild(content);
                        }
                    },
                    setPosition: (x, y) => {
                        let newLeft = Math.min(Math.max(x, 0), windowWidth - popupRect.width);
                        let newTop = Math.min(Math.max(y, 0), windowHeight - popupRect.height);
                        popup.style.left = `${newLeft}px`;
                        popup.style.top = `${newTop}px`;
                    },
                    
                    destroy: () => {
                        document.removeEventListener('mousemove', mouseMoveHandler);
                        document.removeEventListener('mouseup', mouseUpHandler);
                        if (document.body.contains(popup)) {
                            document.body.removeChild(popup);
                        }
                    }
                };
            }
        }
    };
</script>
<style>
     
    .code-rendered-diagram {
        max-width: 80% !important;
        height: auto;
        position: relative;

        svg {
            max-width: 100%;
            height: auto;
        }
    }

    .code-rendered-diagram-copy-button,
    .code-rendered-diagram-fullscreen-button {
        position: absolute;
        top: 20px;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 0 0.3rem;
        margin: 0 0 0 0.6rem;
        color: #333;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        font-size: 0.6rem;
        line-height: 1.8;
        cursor: pointer;
        font-family: "Maple Mono NF CN";
        opacity: 0;
    }

    .code-rendered-diagram-copy-button {
        right: 10px;
    }

    .code-rendered-diagram-fullscreen-button {
        right: 100px;
    }

    .code-rendered-diagram:hover .code-rendered-diagram-copy-button,
    .code-rendered-diagram:hover .code-rendered-diagram-fullscreen-button {
        opacity: 1;
    }

    .fullscreen-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #FBFBFB;
         
        z-index: 99999;
        justify-content: center;
        align-items: center;
    }

    .fullscreen-overlay.active {
        display: flex;
    }

    .fullscreen-overlay img,
    .fullscreen-overlay svg {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        cursor: move;
        transition: transform 0.1s ease-out;
        transform-origin: center center;
    }

    .fullscreen-overlay svg {
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .fullscreen-overlay.dragging {
        cursor: move;
    }

    .fullscreen-exit-button {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 6px;
        color: #666;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        font-size: 0.8rem;
        line-height: 1.8;
        cursor: pointer;
        font-family: "Maple Mono NF CN";
        transition: all 0.2s ease;
        z-index: 100000;
    }

    .fullscreen-exit-button:hover {
        background-color: #e0e0e0;
        color: #333;
    }

     
    .popup-window {
        position: fixed;
        z-index: 10000;
        background-color: #f8f8f8;
        border: 1px solid #ccc;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: box-shadow 0.3s ease;
    }

    .popup-window.dragging {
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        opacity: 0.95;
    }

    .popup-window-title {
        background-color: #e8e8e8;
        padding: 8px 12px;
        font-weight: bold;
        border-bottom: 1px solid #ddd;
        cursor: move;
        user-select: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #333;
        font-family: "Maple Mono NF CN", monospace;
        font-size: 0.9rem;
    }

    .popup-window-close {
        background: none;
        border: none;
        font-size: 1.2rem;
        line-height: 1;
        cursor: pointer;
        color: #666;
        padding: 0 4px;
        margin: -4px -4px 0 0;
        transition: color 0.2s ease;
    }

    .popup-window-close:hover {
        color: #333;
    }

    .popup-window-content {
        overflow: auto;
        padding: 10px;
        font-size: 0.9rem;
    }

     
    .popup-window.source-code-viewer .popup-window-content {
        font-family: "Maple Mono NF CN", monospace;
    }

    .popup-window.source-code-viewer .popup-window-content pre {
        margin: 0;
        white-space: pre-wrap;
    }

    .popup-window.source-code-viewer .popup-window-content code {
        font-family: "Maple Mono NF CN", monospace;
        color: #333;
    }
</style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const plantumlBlocks = document.querySelectorAll('pre code.language-plantuml');
        if (!plantumlBlocks.length) return;

        
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/plantuml-encoder@1.4.0/dist/plantuml-encoder.min.js';

        
        script.onload = () => {
            const plantuml_theme = `
scale 5
skinparam shadowing false
skinparam BackgroundColor transparent
skinparam UsecaseBackgroundColor #white
skinparam classBackgroundColor #white
skinparam ActivityBackgroundColor #white
skinparam ActorBackgroundColor #white
skinparam participantBackgroundColor #white
    `.trim();

            plantumlBlocks.forEach(codeBlock => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const img = document.createElement('img');
                img.className = 'code-rendered-diagram-img';
                img.style.display = 'block';
                img.alt = 'PlantUML Diagram';

                
                const fullCode = `${plantuml_theme}\n\n${codeBlock.textContent}`;
                img.src = 'https://www.plantuml.com/plantuml/svg/' + plantumlEncoder.encode(fullCode);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, fullCode);

                
                window.diagramRenderUtils.setupShowSourceCode(img, fullCode);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, img, true);

                
                

                
                container.appendChild(img);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);
                codeBlock.parentElement.replaceWith(container);
            });
        };

        
        document.head.appendChild(script);
    });
</script>

  
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
        if (!mermaidBlocks.length) return;

        
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.min.js';

        
        script.onload = () => {
            
            mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                
                
                
                theme: 'neutral',
                
                
            });

            
            mermaidBlocks.forEach((codeBlock, index) => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const renderDiv = document.createElement('div');
                renderDiv.id = `mermaid-diagram-${index}`;
                renderDiv.style.background = 'transparent';

                
                const code = codeBlock.textContent.trim();

                try {
                    
                    mermaid.render(`mermaid-svg-${index}`, code).then(result => {
                        renderDiv.innerHTML = result.svg;

                        
                        const svg = renderDiv.querySelector('svg');
                        if (svg) {
                            svg.style.backgroundColor = 'transparent';
                            
                            svg.querySelectorAll('[fill="#ffffff"],[fill="white"],[style*="fill: white"]')
                                .forEach(el => {
                                    if (el.tagName !== 'svg') {
                                        el.setAttribute('fill', 'transparent');
                                    }
                                });
                        }
                    });
                } catch (error) {
                    console.error('Mermaidæ¸²æŸ“é”™è¯¯:', error);
                    renderDiv.innerHTML = `<div style="color:red;border:1px solid red;padding:10px;">
                        Mermaidæ¸²æŸ“é”™è¯¯: ${error.message}
                    </div>`;
                }

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);

                
                window.diagramRenderUtils.setupShowSourceCode(renderDiv, code);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, renderDiv, false);

                
                container.appendChild(renderDiv);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);

                
                const pre = codeBlock.closest('pre');
                pre.insertAdjacentElement('afterend', container);
                pre.remove();
            });
        };

        
        document.head.appendChild(script);
    });
</script>

  
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const markmapBlocks = document.querySelectorAll('pre code.language-map, pre code.language-mindmap');
        if (!markmapBlocks.length) return;

        
        Promise.all([
            loadScript('https://cdn.jsdelivr.net/npm/d3@latest'),
            loadScript('https://cdn.jsdelivr.net/npm/markmap-view@latest'),
            loadScript('https://cdn.jsdelivr.net/npm/markmap-lib@latest')
        ]).then(() => {
            
            markmapBlocks.forEach((codeBlock, index) => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const markmapContainer = document.createElement('div');
                markmapContainer.className = 'markmap';
                markmapContainer.id = `markmap-${index}`;
                markmapContainer.style.minHeight = '300px';
                markmapContainer.style.width = '100%';
                markmapContainer.style.position = 'relative';

                
                const code = codeBlock.textContent.trim();

                
                const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svgElement.style.width = '100%';
                svgElement.style.height = '400px';
                markmapContainer.appendChild(svgElement);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);

                
                window.diagramRenderUtils.setupShowSourceCode(markmapContainer, code);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, markmapContainer, false);

                
                container.appendChild(markmapContainer);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);

                
                const pre = codeBlock.closest('pre');
                pre.insertAdjacentElement('afterend', container);
                pre.remove();

                
                try {
                    
                    const { Transformer } = window.markmap;
                    const transformer = new Transformer();

                    
                    const { root, features } = transformer.transform(code);

                    
                    const { Markmap } = window.markmap;
                    const mm = new Markmap(svgElement, {
                        autoFit: true,
                        duration: 500,
                        zoom: true,
                    });

                    
                    mm.setData(root, features);
                    mm.fit();

                    
                    markmapContainer.dataset.markmapData = JSON.stringify({
                        root: root,
                        features: features
                    });

                    
                    setTimeout(() => {
                        const links = svgElement.querySelectorAll('a');
                        links.forEach(link => {
                            link.setAttribute('target', '_blank');
                            link.setAttribute('rel', 'noopener noreferrer');
                        });
                    }, 100);
                } catch (error) {
                    console.error('Markmapæ¸²æŸ“é”™è¯¯:', error);
                    markmapContainer.innerHTML = `<div style="color:red;border:1px solid red;padding:10px;">
                        Markmapæ¸²æŸ“é”™è¯¯: ${error.message}
                    </div>`;
                }
            });
        }).catch(error => {
            console.error('åŠ è½½markmapåº“å¤±è´¥:', error);
        });

        
        function loadScript(url) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = url;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
    });
</script>


<script>
    
    document.addEventListener('DOMContentLoaded', function() {
        
        if (!window.diagramRenderUtils) return;

        
        const originalSetupFullscreenButton = window.diagramRenderUtils.setupFullscreenButton;
        window.diagramRenderUtils.setupFullscreenButton = function(fullscreenButton, contentElement, isImage = false) {
            
            const isMarkmap = contentElement.classList.contains('markmap');

            if (isMarkmap) {
                fullscreenButton.addEventListener('click', () => {
                    const overlay = this.getOrCreateFullscreenOverlay();
                    overlay.innerHTML = '';

                    
                    const exitButton = document.createElement('button');
                    exitButton.className = 'fullscreen-exit-button';
                    exitButton.innerHTML = 'ESC';
                    exitButton.onclick = () => overlay.classList.remove('active');
                    overlay.appendChild(exitButton);

                    
                    const fullscreenContainer = document.createElement('div');
                    fullscreenContainer.className = 'markmap';
                    fullscreenContainer.style.width = '100%';
                    fullscreenContainer.style.height = '100%';

                    
                    const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svgElement.style.width = '100%';
                    svgElement.style.height = '100%';
                    fullscreenContainer.appendChild(svgElement);

                    overlay.appendChild(fullscreenContainer);
                    overlay.classList.add('active');

                    
                    try {
                        const markmapData = JSON.parse(contentElement.dataset.markmapData || '{}');
                        if (markmapData.root) {
                            
                            const { Markmap } = window.markmap;
                            const mm = new Markmap(svgElement, {
                                autoFit: true,
                                duration: 500,
                                zoom: true,
                            });

                            
                            mm.setData(markmapData.root, markmapData.features);
                            mm.fit();

                            
                            setTimeout(() => {
                                const links = svgElement.querySelectorAll('a');
                                links.forEach(link => {
                                    link.setAttribute('target', '_blank');
                                    link.setAttribute('rel', 'noopener noreferrer');
                                });
                            }, 100);
                        }
                    } catch (error) {
                        console.error('å…¨å±æ¨¡å¼ä¸‹æ¸²æŸ“markmapå¤±è´¥:', error);
                    }

                    
                    this.setupZoomAndDrag(overlay, 'svg');
                });
            } else {
                
                originalSetupFullscreenButton.call(this, fullscreenButton, contentElement, isImage);
            }
        };
    });
</script>

  
<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        const DIAGRAM_MAP = new Map([
            ['plantuml_kroki', 'plantuml'],
            ['mermaid_kroki', 'mermaid'],
            ['graphviz', 'graphviz'],
            ['blockdiag', 'blockdiag'],
            ['seqdiag', 'seqdiag'],
            ['actdiag', 'actdiag'],
            ['packetdiag', 'packetdiag'],
            ['database', 'dbml'],
            ['dbml', 'dbml'],
            ['vega', 'vega']
        ]);

        
        const blocks = [];
        document.querySelectorAll('pre code[class]').forEach(block => {
            if (block.dataset.kroki) return;
            const lang = [...block.classList].find(c => DIAGRAM_MAP.has(c.split('-')[1]));
            if (lang) {
                block.dataset.kroki = 'processed';
                blocks.push({ block, api: DIAGRAM_MAP.get(lang.split('-')[1]) });
            }
        });

        if (!blocks.length) return;

        
        const CONCURRENCY = 6;
        const queue = blocks.slice();

        (async function processQueue() {
            const workers = Array(Math.min(CONCURRENCY, queue.length))
                .fill()
                .map(async () => {
                    while (queue.length) {
                        const { block, api } = queue.pop();
                        await renderBlock(block, api);
                    }
                });
            await Promise.all(workers);
        })();

        async function renderBlock(block, api) {
            const pre = block.closest('pre');
            try {
                const code = block.textContent.trim();
                if (!code) {
                    pre.style.border = '2px solid orange';
                    return;
                }

                const res = await fetch(`https://kroki.io/${api}/svg`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: code
                });

                if (!res.ok) throw new Error(`${await res.text()} (HTTP ${res.status})`);

                
                const svg = window.diagramRenderUtils.createDiagramContainer();
                svg.innerHTML = window.diagramRenderUtils.makeSVGTransparent(await res.text());

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, svg, false);
                svg.appendChild(fullscreenButton);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);
                svg.appendChild(copyButton);

                
                window.diagramRenderUtils.setupShowSourceCode(svg, code);

                pre.insertAdjacentElement('afterend', svg);

                
                pre.remove();
            } catch (err) {
                console.error(`[Kroki] æ¸²æŸ“å¤±è´¥: ${err.message}`);
                pre.style.border = '2px solid red';
                pre.title = err.message;
            }
        }
    });
</script>


  

  <div id="search-modal">
  <input type="text" id="modal-search-input" placeholder="è¾“å…¥å…³é”®è¯æœç´¢..." aria-label="æœç´¢æ¡†" autocomplete="off">
  <div id="modal-search-debug" style="margin-bottom: 10px; color: #999;"></div>
  <div id="modal-search-results"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

<script>
  function debug(text) {
      document.getElementById('modal-search-debug').textContent = text;
  }
  function showpages() {
    debug("å½“å‰æœ¬ç«™å…±æœ‰ " + searchIndex.length + " ç¯‡æ–‡ç« ");
  }

  let searchIndex = [];
  
  
    
  

  
    searchIndex.push({
      title: "\"æ™¶ç•Œå»ºæ¨¡\"",
      permalink: "\"/pymatgen/gainbroundary/\"",
      
      categories: "[\"pymatgen\"]",
      tags: [],
      series: [],
      date: "\"2025-05-24\""
    });
  
    searchIndex.push({
      title: "\"Pytorchä¸­çš„å¼ é‡æ“ä½œ\"",
      permalink: "\"/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E5%BC%A0%E9%87%8F%E6%93%8D%E4%BD%9C/\"",
      
      categories: "[\"æ·±åº¦å­¦ä¹ \"]",
      tags: [],
      series: [],
      date: "\"2025-05-20\""
    });
  
    searchIndex.push({
      title: "\"ç”¨äºæ­å»ºç¥ç»ç½‘ç»œçš„å‡½æ•°\"",
      permalink: "\"/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/pytorch2/\"",
      
      categories: "[\"æ·±åº¦å­¦ä¹ \"]",
      tags: [],
      series: [],
      date: "\"2025-05-19\""
    });
  
    searchIndex.push({
      title: "\"Pythonä¸­çš„æ–‡ä»¶æ“ä½œ\"",
      permalink: "\"/%E4%BB%A3%E7%A0%81/fileoperations/\"",
      
      categories: "[\"ä»£ç \"]",
      tags: [],
      series: [],
      date: "\"2025-05-18\""
    });
  
    searchIndex.push({
      title: "\"èŠ±æœµåˆ†ç±»\"",
      permalink: "\"/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/pytorch1/\"",
      
      categories: "[\"æ·±åº¦å­¦ä¹ \"]",
      tags: [],
      series: [],
      date: "\"2025-05-18\""
    });
  
    searchIndex.push({
      title: "\"ä½¿ç”¨rNEMDæ–¹æ³•è®¡ç®—çƒ­å¯¼ç‡çš„lammpsè¾“å…¥æ–‡ä»¶\"",
      permalink: "\"/%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/thermal_conductivity_rnemd/\"",
      
      categories: "[\"åˆ†å­åŠ¨åŠ›å­¦\"]",
      tags: [],
      series: "[\"LAMMPS\"]",
      date: "\"2025-05-16\""
    });
  
    searchIndex.push({
      title: "\"å¦‚ä½•æ„å»ºè®­ç»ƒé›†ç”¨äºè®­ç»ƒæœºå™¨å­¦ä¹ åŠ¿\"",
      permalink: "\"/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8A%BF/mace1/\"",
      
      categories: "[\"æœºå™¨å­¦ä¹ åŠ¿\"]",
      tags: [],
      series: "[\"ASE\",\"DeepMD-Kit\"]",
      date: "\"2025-05-16\""
    });
  
    searchIndex.push({
      title: "\"æœºå™¨å­¦ä¹ åŠ¿MACEçš„è¾“å…¥æ–‡ä»¶\"",
      permalink: "\"/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8A%BF/mace2/\"",
      
      categories: "[\"æœºå™¨å­¦ä¹ åŠ¿\"]",
      tags: [],
      series: "[\"MACE\"]",
      date: "\"2025-05-16\""
    });
  
    searchIndex.push({
      title: "\"å‡æ–¹ä½ç§»ï¼ˆMSDï¼‰-OVITO\"",
      permalink: "\"/%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/msd_ovito/\"",
      
      categories: "[\"åˆ†å­åŠ¨åŠ›å­¦\"]",
      tags: [],
      series: "[\"OVITO\"]",
      date: "\"2025-05-13\""
    });
  
    searchIndex.push({
      title: "\"ç¨å¾®æ·±å…¥ä¸€äº›Pythonä¸­çš„ç±»ï¼ˆclassï¼‰\"",
      permalink: "\"/%E4%BB%A3%E7%A0%81/class_in_python/\"",
      
      categories: "[\"ä»£ç \"]",
      tags: [],
      series: "[\"python\"]",
      date: "\"2025-05-13\""
    });
  
    searchIndex.push({
      title: "\"å¾„å‘åˆ†å¸ƒå‡½æ•°ï¼ˆRDFï¼‰-OVITO\"",
      permalink: "\"/%E5%88%86%E5%AD%90%E5%8A%A8%E5%8A%9B%E5%AD%A6/rdf_ovito/\"",
      
      categories: "[\"åˆ†å­åŠ¨åŠ›å­¦\"]",
      tags: [],
      series: "[\"OVITO\"]",
      date: "\"2025-05-12\""
    });
  

  showpages()

  const options = {
    includeScore: true,
    threshold: 0.6,
    keys: [
      { name: 'title', weight: 0.7 },
      { name: 'content', weight: 0.3 },
      { name: 'tags', weight: 0.5 },
      { name: 'categories', weight: 0.5 },
      { name: 'series', weight: 0.5 }
    ]
  };

  const fuse = new Fuse(searchIndex, options);

  document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'k') {
      event.preventDefault();
      toggleSearchModal();
    } else if (event.key === 'Escape') {
      document.getElementById('modal-search-input').value = "";
      closeSearchModal();
      var res = document.getElementById('modal-search-results');
      while (res.firstChild) {
        res.removeChild(res.firstChild);
      }
      showpages();
    }
  });

  function toggleSearchModal() {
    const modal = document.getElementById('search-modal');
    if (modal.style.display === 'none') {
      modal.style.display = 'block';
      document.getElementById('modal-search-input').focus();
    } else {
      modal.style.display = 'none';
    }
  }

  function closeSearchModal() {
    const modal = document.getElementById('search-modal');
    modal.style.display = 'none';
  }

  document.getElementById('modal-search-input').addEventListener('input', function(e) {
    const searchTerm = e.target.value.trim();
    const resultsContainer = document.getElementById('modal-search-results');
    resultsContainer.innerHTML = '';

    if (searchTerm === '') {
      showpages()
      return;
    }

    const results = fuse.search(searchTerm);

    results.sort((a, b) => new Date(b.item.date) - new Date(a.item.date));

    if (results.length === 0) {
      showpages()
      resultsContainer.innerHTML = '<p>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç« </p>';
      return;
    } else {
      debug("å…±æ‰¾åˆ° " + results.length + " ç¯‡åŒ¹é…çš„æ–‡ç« ")
    }

    results.forEach(result => {
      const item = result.item;
      const resultItem = document.createElement('div');
      resultItem.className = 'modal-search-result-item';

      const date = document.createElement('span');
      date.textContent = item.date.replace(/^"|"$/g, '') + '   ';
      date.className = 'modal-search-result-date';

      const link = document.createElement('a');
      link.href = item.permalink.replace(/^"|"$/g, '');
      link.textContent = item.title.replace(/^"|"$/g, '');
      link.className = 'modal-search-result-title';

      resultItem.appendChild(date);
      resultItem.appendChild(link);
      resultsContainer.appendChild(resultItem);
    });
  });
</script>

<style>
 
#search-modal {
    display: none;
    position: fixed;
    top: 6%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 20px;
    box-shadow: 0 0 6px rgba(45, 45, 45, 0.5);
    border-radius: 6px;
    z-index: 1000;
    width: 80%;
    max-width: 600px;
    text-align: left;
}

#modal-search-input {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    font-size: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 1rem;
}

#modal-search-results {
    margin-top: 10px;
    max-height: 60vh;
    overflow-y: auto;
}

.modal-search-result-item {
    padding: 0.7rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
}

.modal-search-result-date {
    color: #666;
    font-size: 0.9rem;
    margin-right: 0.5rem;
    text-wrap: nowrap;
}

.modal-search-result-title {
    font-weight: bold;
    color: #1a73e8;
    text-decoration: none;
}

.modal-search-result-title:hover {
    text-decoration: underline;
}
</style>


  
<link rel="stylesheet" href="/css/note_down.min.6f53446a3926929fbd997660313634ca1db4a0566a04ccb07965d98c77e930d8.css">


<script src="/js/note_down.min.f712cab3a19c2b6a7f727ecc52c9666678bba69993e36c2ada9d44bfbf4f5b13.js" defer></script>

  
  <hr />
  Â© 
<a href="https://liubaoshuai1402.github.io/"  target="_blank" rel="noopener noreferrer" >xiaoxiaobuaigugujiao</a>
 2025 &ndash; 2025 | ğŸ¨
<a href="https://github.com/captainwc/captainwc.github.io/tree/main/themes/ksimple"  target="_blank" rel="noopener noreferrer" >KSimple</a>
  

</footer>
</body>

</html>

